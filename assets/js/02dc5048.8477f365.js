"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[557],{3225(e,i,n){n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"platforms/IOS_CocoaPods_Workflow","title":"iOS CocoaPods & Workspace Workflow","description":"This guide documents the specific workflow configuration used in ios-ipa-testflight.yml to support iOS builds that require CocoaPods (e.g., for AdMob integration).","source":"@site/docs/platforms/IOS_CocoaPods_Workflow.md","sourceDirName":"platforms","slug":"/platforms/IOS_CocoaPods_Workflow","permalink":"/Unity-Cloud-Build-Pipeline/platforms/IOS_CocoaPods_Workflow","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"IOS_APNS_CODE_SIGNING","permalink":"/Unity-Cloud-Build-Pipeline/platforms/IOS_APNS_CODE_SIGNING"},"next":{"title":"Unity Cloud Build Issues and Solutions","permalink":"/Unity-Cloud-Build-Pipeline/troubleshooting/Issues_and_Solutions"}}');var s=n(4848),r=n(8453);const l={},t="iOS CocoaPods & Workspace Workflow",c={},d=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\u2699\ufe0f Workflow Configuration",id:"\ufe0f-workflow-configuration",level:2},{value:"1. Plugin Cleanup",id:"1-plugin-cleanup",level:3},{value:"2. Pod Install",id:"2-pod-install",level:3},{value:"3. Build &amp; Archive (Workspace)",id:"3-build--archive-workspace",level:3},{value:"4. Export IPA",id:"4-export-ipa",level:3}];function a(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"ios-cocoapods--workspace-workflow",children:"iOS CocoaPods & Workspace Workflow"})}),"\n",(0,s.jsxs)(i.p,{children:["This guide documents the specific workflow configuration used in ",(0,s.jsx)(i.code,{children:"ios-ipa-testflight.yml"})," to support iOS builds that require CocoaPods (e.g., for AdMob integration)."]}),"\n",(0,s.jsx)(i.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,s.jsxs)(i.p,{children:["The workflow differs from a standard Unity iOS build in one critical way: ",(0,s.jsxs)(i.strong,{children:["it builds an ",(0,s.jsx)(i.code,{children:".xcworkspace"})," instead of an ",(0,s.jsx)(i.code,{children:".xcodeproj"})]}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["This is required because the External Dependency Manager for Unity (EDM4U) generates a ",(0,s.jsx)(i.code,{children:"Podfile"}),", and running ",(0,s.jsx)(i.code,{children:"pod install"})," creates a Workspace that links the Unity project with the native Pods (dependencies)."]}),"\n",(0,s.jsx)(i.h2,{id:"\ufe0f-workflow-configuration",children:"\u2699\ufe0f Workflow Configuration"}),"\n",(0,s.jsxs)(i.p,{children:["The following steps are taken from the active ",(0,s.jsx)(i.code,{children:"ios-ipa-testflight.yml"})," workflow."]}),"\n",(0,s.jsx)(i.h3,{id:"1-plugin-cleanup",children:"1. Plugin Cleanup"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Location:"})," ",(0,s.jsx)(i.code,{children:"buildIOS"})," job"]}),"\n",(0,s.jsxs)(i.p,{children:["The workflow explicitly removes Android-specific plugins but ",(0,s.jsx)(i.strong,{children:"preserves the External Dependency Manager"})," so it can resolve iOS dependencies."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"      - name: Remove Android-specific plugins\n        run: |\n          rm -rf SkrewClient/Assets/Firebase\n          rm -rf SkrewClient/Assets/Firebase.meta\n          rm -rf SkrewClient/Assets/GooglePlayGames\n          rm -rf SkrewClient/Assets/GooglePlayGames.meta\n          # Note: ExternalDependencyManager is intentionally KEPT here\n"})}),"\n",(0,s.jsx)(i.h3,{id:"2-pod-install",children:"2. Pod Install"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Location:"})," ",(0,s.jsx)(i.code,{children:"Mac-Xcode"})," job"]}),"\n",(0,s.jsxs)(i.p,{children:["Before building the Xcode project, the workflow installs the CocoaPods dependencies. This creates the ",(0,s.jsx)(i.code,{children:"Unity-iPhone.xcworkspace"}),"."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"      - name: Run Pod Install\n        run: |\n          cd build/iOS/Build_iOS_auto\n          pod install\n"})}),"\n",(0,s.jsx)(i.h3,{id:"3-build--archive-workspace",children:"3. Build & Archive (Workspace)"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Location:"})," ",(0,s.jsx)(i.code,{children:"Mac-Xcode"})," job"]}),"\n",(0,s.jsxs)(i.p,{children:["The build command is configured to use ",(0,s.jsx)(i.code,{children:"-workspace"})," and point to ",(0,s.jsx)(i.code,{children:"Unity-iPhone.xcworkspace"}),"."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"      - name: sign and archive\n        run: |\n          sudo xcode-select -switch /Applications/Xcode_16.2.app\n          # Code signing configuration is now handled automatically by Unity PostProcessBuild script\n          xcodebuild -configuration \"Release\" ENABLE_BITCODE=NO DEBUGGING_SYMBOLS=NO \\\n            -workspace build/iOS/Build_iOS_auto/Unity-iPhone.xcworkspace \\\n            -scheme Unity-iPhone \\\n            -destination 'generic/platform=iOS' \\\n            -archivePath bb/build.xcarchive \\\n            clean archive\n"})}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.strong,{children:"Key flags used:"})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"-workspace build/iOS/Build_iOS_auto/Unity-iPhone.xcworkspace"}),": Targets the workspace (required for Pods)."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"ENABLE_BITCODE=NO"}),": Disables bitcode (often required for modern AdMob/Firebase SDKs)."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"clean archive"}),": Cleans build artifacts and creates the archive."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"4-export-ipa",children:"4. Export IPA"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Location:"})," ",(0,s.jsx)(i.code,{children:"Mac-Xcode"})," job"]}),"\n",(0,s.jsx)(i.p,{children:"The archive is then exported to an IPA file using the export options plist."}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-yaml",children:"      # Exports the archive according to the export options specified by the plist\n      xcodebuild -exportArchive -archivePath bb/build.xcarchive -exportPath bb/build.ipa -exportOptionsPlist CloudBuild/iOS/exportOptions.plist\n"})})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,i,n){n.d(i,{R:()=>l,x:()=>t});var o=n(6540);const s={},r=o.createContext(s);function l(e){const i=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function t(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(r.Provider,{value:i},e.children)}}}]);