"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[268],{1688(e,i,n){n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>l,default:()=>a,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"platforms/ios/IOS_APNS_CODE_SIGNING","title":"IOS_APNS_CODE_SIGNING","description":"IOS Code Signing Processor","source":"@site/docs/platforms/ios/IOS_APNS_CODE_SIGNING.md","sourceDirName":"platforms/ios","slug":"/platforms/ios/IOS_APNS_CODE_SIGNING","permalink":"/CloudDocumentationPersonal/platforms/ios/IOS_APNS_CODE_SIGNING","draft":false,"unlisted":false,"editUrl":"https://github.com/RayanYousef/CloudDocumentationPersonal/edit/main/website/docs/platforms/ios/IOS_APNS_CODE_SIGNING.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"iOS Build Guide","permalink":"/CloudDocumentationPersonal/platforms/ios/"},"next":{"title":"iOS CocoaPods & Workspace Workflow","permalink":"/CloudDocumentationPersonal/platforms/ios/IOS_CocoaPods_Workflow"}}');var r=n(4848),o=n(8453);const t={},l=void 0,d={},c=[{value:"IOS Code Signing Processor",id:"ios-code-signing-processor",level:2},{value:"Required GitHub Secrets",id:"required-github-secrets",level:3},{value:"When to use this",id:"when-to-use-this",level:3},{value:"What the script does",id:"what-the-script-does",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Files used by the script",id:"files-used-by-the-script",level:3},{value:"Setup steps",id:"setup-steps",level:3},{value:"Create certificates and provisioning profiles",id:"create-certificates-and-provisioning-profiles",level:3},{value:"Notes",id:"notes",level:3},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"File structure (SignCode-related)",id:"file-structure-signcode-related",level:3}];function h(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h2,{id:"ios-code-signing-processor",children:"IOS Code Signing Processor"}),"\n",(0,r.jsx)(i.h3,{id:"required-github-secrets",children:"Required GitHub Secrets"}),"\n",(0,r.jsx)(i.p,{children:"Before setting up the IOS code signing processor, you must configure the following GitHub Secrets in your repository:"}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Secret Name"}),(0,r.jsx)(i.th,{children:"Description"}),(0,r.jsx)(i.th,{children:"Required For"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"APPLE_DISTRIBUTION_P12_PASSWORD"})}),(0,r.jsx)(i.td,{children:"Password for your Apple Distribution certificate (.p12 file)"}),(0,r.jsx)(i.td,{children:"Code signing"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:(0,r.jsx)(i.code,{children:"APNS_P12_PASSWORD"})}),(0,r.jsx)(i.td,{children:"Password for your APNS certificate (.p12 file)"}),(0,r.jsx)(i.td,{children:"Push notifications"})]})]})]}),"\n",(0,r.jsx)(i.p,{children:"This guide extends the base IOS build guide. Use it only when you need precise, scripted control of signing (for example, when adding a Notification Service Extension) beyond what Unity/Xcode automatic signing provides. If you are fine with Unity's automatic signing, you do not need this guide."}),"\n",(0,r.jsxs)(i.p,{children:["This guide explains how to set up the Unity editor script ",(0,r.jsx)(i.code,{children:"IOSCodeSigningProcessor.cs"})," to automate manual code signing for IOS builds, particularly for a Notification Service Extension used by push notifications. If you want to use a Notification Service Extension, you must use this processor. If you prefer to configure signing directly in Xcode and do not use a notification service extension, you can skip this guide."]}),"\n",(0,r.jsx)(i.h3,{id:"when-to-use-this",children:"When to use this"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"You need a Notification Service Extension bundled with the app."}),"\n",(0,r.jsx)(i.li,{children:"You want CI builds to apply manual signing values without opening Xcode."}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"what-the-script-does",children:"What the script does"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Configures manual code signing on the generated Xcode project for the extension target."}),"\n",(0,r.jsx)(i.li,{children:"Sets provisioning profile UUID, development team, and code sign identity."}),"\n",(0,r.jsx)(i.li,{children:"Ensures required notification service files are added to the Xcode project and scheme."}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Apple Developer Program account and Team ID."}),"\n",(0,r.jsx)(i.li,{children:"Valid provisioning profile for the extension/app that matches your bundle identifier."}),"\n",(0,r.jsx)(i.li,{children:"Apple Distribution certificate installed/exported (.p12) and its password."}),"\n",(0,r.jsx)(i.li,{children:"If you use APNS, an APNS certificate (.p12)."}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"files-used-by-the-script",children:"Files used by the script"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"notificationservice/NotificationService.m"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"notificationservice/NotificationService.h"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"notificationservice/Info.plist"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"skrew.entitlements"})}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"setup-steps",children:"Setup steps"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Copy the script into your Unity project:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Source: ",(0,r.jsx)(i.code,{children:"docs/scripts/IOSCodeSigningProcessor.cs"})]}),"\n",(0,r.jsxs)(i.li,{children:["Destination: ",(0,r.jsx)(i.code,{children:"Assets/Editor/IOSCodeSigningProcessor.cs"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Open the script and replace the placeholder values with your own:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Provisioning Profile UUID (e.g., ",(0,r.jsx)(i.code,{children:"YOUR_PROVISIONING_PROFILE_UUID"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Apple Developer Team ID (e.g., ",(0,r.jsx)(i.code,{children:"YOUR_TEAM_ID"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Code Sign Identity (e.g., ",(0,r.jsx)(i.code,{children:"Apple Distribution: Your Name (YOUR_TEAM_ID)"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"In Unity, configure Player Settings for IOS signing (manual):"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Set ",(0,r.jsx)(i.code,{children:"Signing Team Id"})," to your Team ID."]}),"\n",(0,r.jsxs)(i.li,{children:["Disable ",(0,r.jsx)(i.code,{children:"Automatically Sign"}),"."]}),"\n",(0,r.jsxs)(i.li,{children:["Set ",(0,r.jsx)(i.code,{children:"Profile ID"})," to your provisioning profile UUID."]}),"\n",(0,r.jsxs)(i.li,{children:["Choose the correct ",(0,r.jsx)(i.code,{children:"Profile Type"})," (e.g., Distribution)."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Commit and push the Unity project settings so CI uses them:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Ensure changes in ",(0,r.jsx)(i.code,{children:"ProjectSettings/ProjectSettings.asset"})," are included."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Trigger your IOS build workflow. The script runs during Unity's post-process build and applies the signing to the Xcode project."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"create-certificates-and-provisioning-profiles",children:"Create certificates and provisioning profiles"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Apple Distribution Certificate"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:'Visit Apple Developer Certificates and create an "Apple Distribution" certificate.'}),"\n",(0,r.jsxs)(i.li,{children:["Download the .p12 and store it as ",(0,r.jsx)(i.code,{children:"CloudBuild/IOS/Certificates/Apple_Distribution.p12"}),"."]}),"\n",(0,r.jsxs)(i.li,{children:["Keep the password and set it as ",(0,r.jsx)(i.code,{children:"APPLE_DISTRIBUTION_P12_PASSWORD"})," secret."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"APNS Certificate (if using push notifications)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:'Create "Apple Push Notification service SSL (Sandbox & Production)" for your App ID.'}),"\n",(0,r.jsxs)(i.li,{children:["Download the .p12 and store it as ",(0,r.jsx)(i.code,{children:"CloudBuild/IOS/Certificates/Skrew_APNS_Prod.p12"}),"."]}),"\n",(0,r.jsxs)(i.li,{children:["Keep the password and set it as ",(0,r.jsx)(i.code,{children:"APNS_P12_PASSWORD"})," secret."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Provisioning Profile"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:'Create an "App Store" provisioning profile for your app/extension.'}),"\n",(0,r.jsxs)(i.li,{children:["Download and place under ",(0,r.jsx)(i.code,{children:"CloudBuild/IOS/ProvisioningProfiles/"}),"."]}),"\n",(0,r.jsxs)(i.li,{children:["CI will copy profiles to ",(0,r.jsx)(i.code,{children:"~/Library/Developer/Xcode/UserData/Provisioning Profiles/"})," and ",(0,r.jsx)(i.code,{children:"~/Library/MobileDevice/Provisioning Profiles/"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"If you skip this script, configure signing in Xcode or rely on your preferred signing tool during export."}),"\n",(0,r.jsx)(i.li,{children:"Keep certificates and profiles up to date to avoid CI failures."}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:'"No matching provisioning profile": Verify the UUID and that the profile includes the app/extension bundle ID.'}),"\n",(0,r.jsx)(i.li,{children:"Code sign identity mismatch: Ensure the installed certificate matches the identity string used."}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"file-structure-signcode-related",children:"File structure (SignCode-related)"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{children:"CloudBuild/\n\u2514\u2500\u2500 IOS/\n    \u251c\u2500\u2500 Certificates/\n    \u2502   \u251c\u2500\u2500 Apple_Distribution.p12\n    \u2502   \u2514\u2500\u2500 YOUR_APP_NAME_APNS_Prod.p12\n    \u251c\u2500\u2500 ProvisioningProfiles/\n    \u2502   \u2514\u2500\u2500 *.mobileprovision\n    \u2514\u2500\u2500 exportOptions.plist\n\nAssets/\n\u2514\u2500\u2500 Editor/\n    \u251c\u2500\u2500 CustomBuildProcessor.cs\n    \u2514\u2500\u2500 IOSCodeSigningProcessor.cs (optional, only if you use the processor)\n"})}),"\n",(0,r.jsxs)(i.p,{children:["Back to the IOS build guide: ",(0,r.jsx)(i.a,{href:"/CloudDocumentationPersonal/platforms/ios/",children:"IOS.md"})]})]})}function a(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,i,n){n.d(i,{R:()=>t,x:()=>l});var s=n(6540);const r={},o=s.createContext(r);function t(e){const i=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(o.Provider,{value:i},e.children)}}}]);